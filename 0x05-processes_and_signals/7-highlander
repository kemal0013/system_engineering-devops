#!/usr/bin/env bash
# Infinite loop script that reliably handles SIGTERM

# Ensure immediate output
exec > >(while read -r line; do echo "$line"; done)

# Signal handler function
handle_term() {
    echo "I am invincible!!!"
}

# Set trap FIRST with proper quoting
trap 'handle_term' SIGTERM

# Main loop
while :; do
    echo "To infinity and beyond"
    sleep 2
done
